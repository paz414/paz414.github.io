<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Parth Singh — Portfolio</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ============ Apple-clean base with tech polish ============ */
  :root{
    --bg: #0b0c10;        /* canvas sits over this */
    --panel: #0f1115;
    --text: #f5f6f8;
    --muted: #9aa0aa;
    --border: #1c1f28;
    --ring: rgba(126,164,255,.25);
    --accent: #87b0ff;    /* subtle blue accent */
    --glow: 0 0 40px rgba(120,160,255,.25);
  }
  html.light{
    --bg: #ffffff;
    --panel: #fafafa;
    --text: #0a0a0a;
    --muted: #6b7280;
    --border: #e5e7eb;
    --ring: rgba(15,23,42,.15);
    --accent: #0f172a;
    --glow: 0 0 32px rgba(15,23,42,.15);
    color-scheme: light;
  }
  *{box-sizing:border-box}
  html{scroll-behavior:smooth}
  body{
    margin:0; font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text",Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    background: var(--bg); color:var(--text); line-height:1.6;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }
  a{color:inherit;text-decoration:none}
  .container{max-width:1120px;margin:0 auto;padding:0 16px}
  .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
  .muted{color:var(--muted)}
  .kbd{font:600 .75rem ui-monospace,SFMono-Regular,Menlo,monospace;border:1px solid var(--border);padding:.15rem .35rem;border-radius:6px;color:var(--muted)}
  .btn{
    display:inline-flex;align-items:center;gap:.6rem;border:1px solid var(--border);
    padding:.65rem 1rem;border-radius:999px;font-weight:600;font-size:.92rem;cursor:pointer;
    background:linear-gradient(180deg,rgba(255,255,255,.04),transparent);
    box-shadow:var(--glow); transition:transform .08s ease, box-shadow .25s ease, opacity .25s ease;
  }
  .btn.primary{background:linear-gradient(180deg,#6ea1ff,#4e77ff);color:#fff;border-color:transparent}
  .btn:hover{box-shadow:0 6px 34px rgba(120,160,255,.25)}
  .btn:active{transform:translateY(1px)}
  .chip{
    padding:.35rem .7rem;border:1px solid var(--border);border-radius:999px;color:var(--muted);font-size:.78rem;display:inline-flex;align-items:center;gap:.4rem
  }
  .card{
    background:linear-gradient(0deg,var(--panel),var(--panel));
    border:1px solid var(--border); border-radius:16px; padding:20px; backdrop-filter:saturate(180%) blur(8px);
    box-shadow:var(--glow); transform:translateZ(0); transition: transform .2s ease, box-shadow .3s ease, border-color .3s ease;
    will-change: transform;
  }
  .card:hover{transform:translateY(-2px); border-color:color-mix(in srgb, var(--border) 60%, var(--accent)); box-shadow:0 16px 60px rgba(120,160,255,.15)}
  .divider{height:1px;background:linear-gradient(90deg,transparent,var(--border),transparent);border:0;margin:16px 0}
  section{scroll-margin-top:96px;padding:72px 0}
  h1{font-size:clamp(2rem,4vw,3.5rem);line-height:1.15;margin:0 0 .5rem}
  h2{font-size:clamp(1.6rem,2.5vw,2.25rem);line-height:1.2;margin:0}
  h3{font-size:1.05rem;margin:.2rem 0 .2rem}
  p{margin:.25rem 0}
  .grid{display:grid;gap:16px}
  .grid.cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}
  .grid.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
  @media (max-width:900px){ .grid.cols-2,.grid.cols-3{grid-template-columns:1fr} }

  /* ---------- Header ---------- */
  .header{
    position:sticky;top:0;z-index:50;
    backdrop-filter:saturate(180%) blur(12px);
    background:linear-gradient(180deg,rgba(5,8,14,.75),rgba(5,8,14,.45));
    border-bottom:1px solid var(--border);
  }
  .nav{display:flex;align-items:center;gap:22px;font-size:.95rem}
  .nav a{color:var(--muted)}
  .nav a:hover{color:var(--text)}
  .toggle{
    display:inline-flex;align-items:center;gap:.5rem;border:1px solid var(--border);
    padding:.45rem .85rem;border-radius:999px;background:transparent;color:var(--text);cursor:pointer
  }

  /* ---------- Hero layout ---------- */
  .hero{display:grid;grid-template-columns:2fr 1fr;gap:24px;align-items:end}
  @media (max-width:900px){.hero{grid-template-columns:1fr}}
  .stat{border-radius:12px;padding:14px;background:color-mix(in srgb, var(--panel) 85%, transparent);border:1px solid var(--border)}
  .stat .v{font-weight:800;font-size:1.3rem}

  /* Section headers */
  .kicker{text-transform:uppercase;letter-spacing:.2em;font-size:.8rem;color:var(--muted);margin-bottom:6px}

  /* Reveal-on-scroll */
  .reveal{opacity:0; transform:translateY(10px); transition:opacity .5s ease, transform .5s ease}
  .reveal.revealed{opacity:1; transform:none}

  /* Background layers */
  #bg-wrap{position:fixed;inset:0;z-index:-2;pointer-events:none}
  #three{position:absolute;inset:0}
  .grid-overlay{
    position:absolute;inset:0; pointer-events:none; opacity:.12;
    background:
      radial-gradient(60% 50% at 50% -10%,rgba(120,160,255,.25),transparent 60%),
      linear-gradient(transparent 60%, rgba(0,0,0,.25)),
      repeating-linear-gradient(90deg, rgba(255,255,255,.08) 0 1px, transparent 1px 80px),
      repeating-linear-gradient(0deg, rgba(255,255,255,.05) 0 1px, transparent 1px 80px);
  }
  .glow-ring{
    position:absolute;left:50%;top:10%;width:60vmax;height:60vmax;transform:translate(-50%,0);
    background:radial-gradient(closest-side, rgba(120,160,255,.08), transparent 70%);
    filter:blur(20px);
  }

  /* Reduce motion for accessibility */
  @media (prefers-reduced-motion: reduce){
    .card:hover{transform:none}
    .reveal{transition:none}
  }
</style>
</head>
<body>
<!-- Tech background: Three.js canvas + subtle grid -->
<div id="bg-wrap" aria-hidden="true">
  <canvas id="three"></canvas>
  <div class="grid-overlay"></div>
  <div class="glow-ring"></div>
</div>

<header class="header">
  <div class="container" style="height:64px;display:flex;align-items:center;justify-content:space-between;">
    <a href="#top" style="font-weight:700;letter-spacing:.2px">Parth Singh</a>
    <nav class="nav">
      <a href="#experience">Experience</a>
      <a href="#projects">Projects</a>
      <a href="#skills">Skills</a>
      <a href="#achievements">Achievements</a>
      <a href="#education">Education</a>
      <a href="#extras">Beyond</a>
      <button id="theme" class="toggle" type="button" aria-label="Toggle theme">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="4"/><path d="M12 2v2m0 16v2M2 12h2m16 0h2M5.6 5.6l1.4 1.4m10 10 1.4 1.4M5.6 18.4l1.4-1.4m10-10 1.4-1.4"/></svg>
        <span id="themeLabel">Light</span>
      </button>
      <a class="btn" href="mailto:singh.parthiitd@gmail.com" style="padding:.45rem .9rem">Email</a>
    </nav>
  </div>
</header>

<main id="top">
  <!-- Hero -->
  <section class="container" style="padding-top:72px">
    <div class="hero reveal">
      <div>
        <h1>Parth Singh</h1>
        <p style="font-size:1.1rem" class="muted">Analytics Engineer • IIT Delhi B.Tech '26</p>
        <p style="max-width:46ch;margin-top:14px">
          Engineer focused on generative analytics, ML systems and reliable data tooling. I ship clean, production-grade features that actually move metrics.
        </p>
        <div class="row" style="margin-top:16px">
          <a class="btn primary" href="#projects">
            Explore work
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M5 12h14M13 5l7 7-7 7"/></svg>
          </a>
          <a class="btn" href="./resume.pdf" download>
            Download résumé
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 3v12m0 0 4-4m-4 4-4-4"/><path d="M5 21h14"/></svg>
          </a>
        </div>
        <div class="row" style="margin-top:10px">
          <span class="chip">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M22 16.92V21a1 1 0 0 1-1.09 1 19.86 19.86 0 0 1-8.63-3.07A19.5 19.5 0 0 1 3.07 11.72 19.86 19.86 0 0 1 0 3.09 1 1 0 0 1 1 2h4.09A1 1 0 0 1 6 2.89a12.44 12.44 0 0 0 .7 2.22 1 1 0 0 1-.23 1.11L5.21 7.49a16 16 0 0 0 7.3 7.3l1.27-1.26a1 1 0 0 1 1.11-.24 12.44 12.44 0 0 0 2.22.7A1 1 0 0 1 17.11 15H21a1 1 0 0 1 1 1z"/></svg>
            +91-6394711881
          </span>
          <span class="chip">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 .5A12 12 0 0 0 0 12.7c0 5.4 3.4 10 8.2 11.6.6.1.8-.3.8-.6v-2.2c-3.3.8-4-1.6-4-1.6-.5-1.4-1.2-1.8-1.2-1.8-1-.7.1-.7.1-.7 1.1.1 1.7 1.2 1.7 1.2 1 .1.9 1.7 2.8 1.2 0-.8.4-1.3.7-1.6-2.6-.3-5.4-1.4-5.4-6.2 0-1.4.5-2.5 1.2-3.4 0-.3-.5-1.7.1-3.5 0 0 1-.3 3.5 1.3a12.2 12.2 0 0 1 6.4 0c2.5-1.6 3.5-1.3 3.5-1.3.6 1.8.1 3.2.1 3.5.8.9 1.2 2 1.2 3.4 0 4.8-2.8 5.9-5.4 6.2.4.3.8.9.8 1.9v2.8c0 .3.2.7.8.6A12 12 0 0 0 24 12.7 12 12 0 0 0 12 .5Z"/></svg>
            <a href="https://github.com/paz414" target="_blank" rel="noreferrer">paz414</a>
          </span>
        </div>
        <p class="muted" style="margin-top:8px">Press <span class="kbd">G</span> to jump anywhere.</p>
      </div>
      <div class="card">
        <div class="grid cols-2">
          <!-- <div class="stat"><div class="v">0.87</div><small class="muted">Weighted R²</small></div> -->
          <!-- <div class="stat"><div class="v">#9/500+</div><small class="muted">Hackathon Rank</small></div> -->
          <!-- <div class="stat"><div class="v">100k+</div><small class="muted">Graph nodes</small></div> -->
          <!-- <div class="stat"><div class="v">7.817</div><small class="muted">CGPA</small></div> -->
        </div>
      </div>
    </div>
  </section>

  <hr class="divider" />

  <!-- Experience -->
  <section id="experience">
    <div class="container reveal">
      <div style="margin-bottom:14px">
        <div class="kicker">Professional</div>
        <h2>Experience</h2>
      </div>
      <div class="grid">
        <article class="card">
          <div class="row" style="justify-content:space-between;align-items:flex-start">
            <div>
              <h3>Analytics Engineer Intern · Chubb</h3>
              <small class="muted">Bengaluru, India · May 2025 – Jul 2025</small>
            </div>
            <span class="chip">PPO</span>
          </div>
          <ul style="margin-top:10px;padding-left:18px">
            <li>Production BI Agent with NL→SQL and auto Plotly dashboards on Snowflake.</li>
            <li>Auto SQL repair, relevance checks, input suggestions, and smart caching.</li>
            <li>Insurance complaints pipeline: 7.4K+ cases with L1→L2 root-cause tags.</li>
            <li>Token-aware batching on Azure OpenAI for schema-constrained prompts.</li>
            <li>IQR-based outlier detection and KPI trend visualizations.</li>
            <li>Received PPO for performance.</li>
          </ul>
        </article>
      </div>
    </div>
  </section>

  <hr class="divider" />

  <!-- Projects -->
  <section id="projects">
    <div class="container reveal">
      <div style="margin-bottom:14px">
        <div class="kicker">Selected work</div>
        <h2>Projects</h2>
      </div>
      <div class="row" id="filters" style="margin-bottom:12px">
        <button class="btn chip" data-filter="All">All</button>
        <button class="btn chip" data-filter="ML">ML</button>
        <button class="btn chip" data-filter="Systems">Systems</button>
        <button class="btn chip" data-filter="Data">Data</button>
        <button class="btn chip" data-filter="Quant">Quant</button>
      </div>

      <div class="grid cols-3" id="projectGrid">
        <article class="card project" data-cats="ML,Data">
          <div class="row" style="justify-content:space-between">
            <h3>Railway Incident Prediction (CRIS)</h3><span class="chip">ML</span>
          </div>
          <p class="muted">Jan 2025 – Present</p>
          <p>Predictive models for railway failures using heterogeneous signals with automated alignment of fault codes to operational and environmental signals.</p>
        </article>

        <article class="card project" data-cats="ML,Quant">
          <div class="row" style="justify-content:space-between">
            <h3>Real-Time Market Data Forecasting (Jane Street)</h3><span class="chip">Quant</span>
          </div>
          <p class="muted">Dec 2024 – Present</p>
          <p>TimeXer with weighted R² 0.87; faster imputation and integrated exogenous/endogenous inputs.</p>
        </article>

        <article class="card project" data-cats="Systems">
          <div class="row" style="justify-content:space-between">
            <h3>Parallel Graph Centrality (OpenMP)</h3><span class="chip">Systems</span>
          </div>
          <p class="muted">Sep 2024 – Dec 2024</p>
          <p>Degree and betweenness centrality with OpenMP; hybrid ranking for top-k influencers on graphs with 100k+ nodes and 13M edges.</p>
        </article>

        <article class="card project" data-cats="Systems">
          <div class="row" style="justify-content:space-between">
            <h3>Virtual Machine Implementation (C++)</h3><span class="chip">Systems</span>
          </div>
          <p class="muted">Jun 2024 – Aug 2024</p>
          <p>Custom stack-based virtual CPU with assembler and lexer; file I/O, custom ISA, and debugging tools.</p>
        </article>

        <article class="card project" data-cats="ML">
          <div class="row" style="justify-content:space-between">
            <h3>Resume Anomaly Detection</h3><span class="chip">ML</span>
          </div>
          <p class="muted">Oct 2024 – Present</p>
          <p>BiLSTM autoencoder with 92% precision; silhouette 0.87 and 91.7% accuracy for HR fraud detection at scale.</p>
        </article>
      </div>
    </div>
  </section>

  <hr class="divider" />

  <!-- Skills -->
  <section id="skills">
    <div class="container reveal">
      <div style="margin-bottom:14px">
        <div class="kicker">Tooling & stacks</div>
        <h2>Skills</h2>
      </div>
      <div class="grid cols-3">
        <div class="card">
          <h3>Languages</h3>
          <div class="row" style="margin-top:8px">
            <span class="chip">Python</span><span class="chip">C++</span><span class="chip">Java</span>
          </div>
        </div>
        <div class="card">
          <h3>Analytics</h3>
          <div class="row" style="margin-top:8px">
            <span class="chip">PyTorch</span><span class="chip">TensorFlow</span><span class="chip">scikit-learn</span>
            <span class="chip">Pandas</span><span class="chip">NumPy</span><span class="chip">Plotly</span>
          </div>
        </div>
        <div class="card">
          <h3>Web</h3>
          <div class="row" style="margin-top:8px">
            <span class="chip">JavaScript</span><span class="chip">HTML/CSS</span><span class="chip">MySQL</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <hr class="divider" />

  <!-- Achievements -->
  <section id="achievements">
    <div class="container reveal">
      <div style="margin-bottom:14px">
        <div class="kicker">Highlights</div>
        <h2>Achievements</h2>
      </div>
      <div class="grid cols-2">
        <div class="card">Global Rank 9/500+ in Chubb hackathon (GPT-4 BI agent)</div>
        <div class="card">Exchange Exam Rank 10/1200+ at IIT Delhi; KAIST offer</div>
        <div class="card">Endowment Merit Scholarship (Top 5% dept.)</div>
        <div class="card">Merit-based Branch Change (Top 7% first-year)</div>
        <div class="card">INSPIRE Scholarship (Top 1% Class XII)</div>
        <div class="card">JEE Advanced AIR 2291 (Top 0.9%)</div>
      </div>
    </div>
  </section>

  <hr class="divider" />

  <!-- Education -->
  <section id="education">
    <div class="container reveal">
      <div style="margin-bottom:14px">
        <div class="kicker">Academic</div>
        <h2>Education</h2>
      </div>
      <div class="card row" style="justify-content:space-between">
        <div>
          <h3>Indian Institute of Technology, Delhi</h3>
          <small class="muted">B.Tech (2022–2026)</small>
        </div>
        <span class="chip">CGPA 7.817</span>
      </div>
    </div>
  </section>

  <hr class="divider" />

  <!-- Extras -->
  <section id="extras">
    <div class="container reveal">
      <div style="margin-bottom:14px">
        <div class="kicker">Activities</div>
        <h2>Beyond work</h2>
      </div>
      <div class="grid cols-3">
        <div class="card">Academic Mentor, ELL101 (2023)</div>
        <div class="card">Captain, Lawn Tennis — Satpura Hostel (2024)</div>
        <div class="card">WCA Rankings: #140 India, #3358 World (2024)</div>
      </div>
    </div>
  </section>
</main>

<footer style="padding:40px 0;border-top:1px solid var(--border)">
  <div class="container row" style="justify-content:space-between;">
    <small class="muted">© <span id="year"></span> Parth Singh. Built with clean edges.</small>
    <div class="row">
      <a href="mailto:singh.parthiitd@gmail.com" class="row">Email</a>
      <a href="tel:+916394711881" class="row">Call</a>
      <a href="https://github.com/paz414" target="_blank" rel="noreferrer" class="row">GitHub</a>
    </div>
  </div>
</footer>

<!-- Command palette -->
<div id="overlay" style="position:fixed;inset:0;background:rgba(0,0,0,.35);backdrop-filter:blur(4px);display:none;align-items:flex-start;justify-content:center;padding:24px;z-index:60">
  <div style="width:min(720px,92vw);background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:14px 14px 6px;box-shadow:var(--glow)">
    <label class="sr-only" style="position:absolute;left:-10000px">Jump to Section</label>
    <input id="jumpInput" placeholder="Jump to… (Experience, Projects, Skills, Achievements, Education, Beyond)"
      style="width:100%;padding:.7rem;border:1px solid var(--border);border-radius:10px;background:transparent;color:var(--text);outline:2px solid transparent;outline-offset:2px" />
    <div style="margin-top:10px;border-top:1px solid var(--border)" id="jumpRows">
      <a href="#experience" style="display:flex;justify-content:space-between;padding:10px;border-bottom:1px solid var(--border);color:var(--text)">Experience <span class="kbd">Enter</span></a>
      <a href="#projects" style="display:flex;justify-content:space-between;padding:10px;border-bottom:1px solid var(--border);color:var(--text)">Projects <span class="kbd">Enter</span></a>
      <a href="#skills" style="display:flex;justify-content:space-between;padding:10px;border-bottom:1px solid var(--border);color:var(--text)">Skills <span class="kbd">Enter</span></a>
      <a href="#achievements" style="display:flex;justify-content:space-between;padding:10px;border-bottom:1px solid var(--border);color:var(--text)">Achievements <span class="kbd">Enter</span></a>
      <a href="#education" style="display:flex;justify-content:space-between;padding:10px;border-bottom:1px solid var(--border);color:var(--text)">Education <span class="kbd">Enter</span></a>
      <a href="#extras" style="display:flex;justify-content:space-between;padding:10px;color:var(--text)">Beyond work <span class="kbd">Enter</span></a>
    </div>
  </div>
</div>

<!-- Three.js background and interactions -->
<script type="module">
  import * as THREE from 'https://unpkg.com/three@0.160.0/build/three.module.js';

  /* ---------- Scene ---------- */
  const canvas = document.getElementById('three');
  const dpr = Math.min(window.devicePixelRatio || 1, 1.75);
  const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
  renderer.setPixelRatio(dpr);

  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(60, 1, 0.1, 1000);
  camera.position.set(0, 0, 140);

  const resize = () => {
    const w = window.innerWidth, h = window.innerHeight;
    renderer.setSize(w, h, false);
    camera.aspect = w / h;
    camera.updateProjectionMatrix();
  };
  resize(); window.addEventListener('resize', resize);

  /* ---------- Tech “graph” background: drifting nodes + edges ---------- */
  const N = 180;
  const radius = 80;
  const nodes = [];
  const positions = new Float32Array(N * 3);
  const velocities = new Float32Array(N * 3);
  for (let i = 0; i < N; i++) {
    // random on sphere, then jitter inward
    const u = Math.random(), v = Math.random();
    const theta = 2 * Math.PI * u, phi = Math.acos(2 * v - 1);
    const r = radius * (0.7 + Math.random() * 0.3);
    const x = r * Math.sin(phi) * Math.cos(theta);
    const y = r * Math.sin(phi) * Math.sin(theta);
    const z = r * Math.cos(phi);
    positions[i*3+0] = x; positions[i*3+1] = y; positions[i*3+2] = z;
    velocities[i*3+0] = (Math.random()-0.5)*0.06;
    velocities[i*3+1] = (Math.random()-0.5)*0.06;
    velocities[i*3+2] = (Math.random()-0.5)*0.06;
    nodes.push({x,y,z});
  }

  // Points
  const pGeo = new THREE.BufferGeometry();
  pGeo.setAttribute('position', new THREE.BufferAttribute(positions, 3));
  const pMat = new THREE.PointsMaterial({ color: 0x92a9ff, size: 2.2, sizeAttenuation: true, transparent: true, opacity: 0.9 });
  const points = new THREE.Points(pGeo, pMat);
  scene.add(points);

  // Edges: connect to 3 nearest neighbors at init
  const K = 3;
  const edgePairs = [];
  for (let i = 0; i < N; i++) {
    const dists = [];
    for (let j = 0; j < N; j++) if (j !== i) {
      const dx = positions[i*3]-positions[j*3], dy = positions[i*3+1]-positions[j*3+1], dz = positions[i*3+2]-positions[j*3+2];
      dists.push([dx*dx+dy*dy+dz*dz, j]);
    }
    dists.sort((a,b)=>a[0]-b[0]);
    for (let k = 0; k < K; k++) edgePairs.push([i, dists[k][1]]);
  }
  const lPositions = new Float32Array(edgePairs.length * 2 * 3);
  const lGeo = new THREE.BufferGeometry();
  lGeo.setAttribute('position', new THREE.BufferAttribute(lPositions, 3));
  const lMat = new THREE.LineBasicMaterial({ color: 0x4b79ff, transparent: true, opacity: 0.28 });
  const lines = new THREE.LineSegments(lGeo, lMat);
  scene.add(lines);

  // Mouse parallax and gentle attraction
  const mouse = new THREE.Vector2(0,0);
  window.addEventListener('pointermove', e => {
    mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
    mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
  });

  // Pulse on click
  window.addEventListener('click', () => {
    for (let i = 0; i < N; i++) {
      velocities[i*3+0] += (Math.random()-0.5)*0.8;
      velocities[i*3+1] += (Math.random()-0.5)*0.8;
      velocities[i*3+2] += (Math.random()-0.5)*0.8;
    }
  });

  // Animation
  let t = 0;
  function tick(){
    t += 0.005;
    // parallax camera
    camera.position.x = mouse.x * 8;
    camera.position.y = mouse.y * 6;
    camera.lookAt(0,0,0);

    // update nodes with mild spring toward sphere shell + drag
    for (let i = 0; i < N; i++) {
      const ix = i*3;
      let x = positions[ix], y = positions[ix+1], z = positions[ix+2];

      // tend toward a wobbling shell
      const targetR = radius * (0.85 + 0.10 * Math.sin(t + i*0.17));
      const r = Math.max(1e-3, Math.sqrt(x*x+y*y+z*z));
      const k = 0.0008 * (targetR - r);
      velocities[ix]   += (x/r) * k + 0.001 * Math.sin(t + i*0.3);
      velocities[ix+1] += (y/r) * k + 0.001 * Math.cos(t*1.1 + i*0.19);
      velocities[ix+2] += (z/r) * k + 0.0012 * Math.sin(t*1.3 + i*0.11);

      // pointer repulsion (projected)
      velocities[ix]   += (mouse.x * 0.02);
      velocities[ix+1] += (mouse.y * 0.02);

      // integrate + damping
      positions[ix]   = x + velocities[ix];
      positions[ix+1] = y + velocities[ix+1];
      positions[ix+2] = z + velocities[ix+2];
      velocities[ix]  *= 0.985; velocities[ix+1]*=0.985; velocities[ix+2]*=0.985;
    }
    pGeo.attributes.position.needsUpdate = true;

    // update line positions
    let lp = 0;
    for (const [a,b] of edgePairs){
      const a3 = a*3, b3 = b*3;
      lPositions[lp++] = positions[a3];   lPositions[lp++] = positions[a3+1];   lPositions[lp++] = positions[a3+2];
      lPositions[lp++] = positions[b3];   lPositions[lp++] = positions[b3+1];   lPositions[lp++] = positions[b3+2];
    }
    lGeo.attributes.position.needsUpdate = true;

    renderer.render(scene, camera);
    requestAnimationFrame(tick);
  }
  tick();
</script>

<!-- UI behavior -->
<script>
  // Year
  document.getElementById('year').textContent = new Date().getFullYear();

  // Theme toggle with localStorage; defaults to dark
  const root = document.documentElement;
  const saved = localStorage.getItem('theme');
  if (saved === 'light') root.classList.add('light');
  const themeBtn = document.getElementById('theme');
  const themeLabel = document.getElementById('themeLabel');
  const setLabel = () => themeLabel.textContent = root.classList.contains('light') ? 'Dark' : 'Light';
  setLabel();
  themeBtn.addEventListener('click', () => {
    root.classList.toggle('light'); localStorage.setItem('theme', root.classList.contains('light') ? 'light':'dark'); setLabel();
  });

  // Smooth internal link scroll safety
  document.addEventListener('click', (e) => {
    const a = e.target.closest('a[href^="#"]');
    if (!a) return;
    const id = a.getAttribute('href').slice(1);
    const el = document.getElementById(id);
    if (el) { e.preventDefault(); el.scrollIntoView({behavior:'smooth',block:'start'}); }
  });

  // Filters
  const grid = document.getElementById('projectGrid');
  const buttons = document.querySelectorAll('#filters .btn');
  buttons.forEach(btn => btn.addEventListener('click', () => {
    buttons.forEach(b => b.classList.remove('primary'));
    btn.classList.add('primary');
    const want = btn.dataset.filter;
    grid.querySelectorAll('.project').forEach(card => {
      const cats = card.dataset.cats.split(',').map(s => s.trim());
      card.style.display = (want === 'All' || cats.includes(want)) ? '' : 'none';
    });
  }));
  // mark "All" active initially
  document.querySelector('#filters [data-filter="All"]').classList.add('primary');

  // Command palette: press G
  const overlay = document.getElementById('overlay');
  const jumpInput = document.getElementById('jumpInput');
  const jumpRows = document.getElementById('jumpRows');
  const entries = Array.from(jumpRows.querySelectorAll('a'));
  const openPalette = () => { overlay.style.display='flex'; jumpInput.value=''; jumpInput.focus(); filterPalette(''); };
  const closePalette = () => { overlay.style.display='none'; };
  const filterPalette = (q) => entries.forEach(a => a.style.display = a.textContent.toLowerCase().includes(q.toLowerCase()) ? 'flex' : 'none');
  window.addEventListener('keydown', (e) => {
    if (e.key.toLowerCase() === 'g' && !e.metaKey && !e.ctrlKey && !e.altKey) { e.preventDefault(); openPalette(); }
    else if (e.key === 'Escape' && overlay.style.display === 'flex') closePalette();
  });
  jumpInput.addEventListener('input', (e) => filterPalette(e.target.value));
  jumpInput.addEventListener('keydown', (e) => { if (e.key === 'Enter'){ const first = entries.find(a => a.style.display !== 'none'); if (first){ location.hash = first.getAttribute('href'); closePalette(); } } });
  overlay.addEventListener('click', (e) => { if (e.target === overlay) closePalette(); });

  // Reveal on scroll
  const io = new IntersectionObserver((entries)=>entries.forEach(ent=>ent.isIntersecting && ent.target.classList.add('revealed')), {threshold:.12});
  document.querySelectorAll('.reveal').forEach(el=>io.observe(el));
  document.querySelectorAll('section .container').forEach(el=>{ el.classList.add('reveal'); io.observe(el); });
</script>
</body>
</html>
